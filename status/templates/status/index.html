{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}
{% block head_extends %}
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
{% endblock %}

<div class="main-body" style="min-hight:1600px">
  <div class="content">
      <section class="sub-header" style="display:none;">
  			<section class="mobSecNav">
                <img id="subNavlogo" src="{% static 'img/mnav2.png'%}" style="padding-bottom:6px;"></section>
  			<section class="mobSecNavMenu">
  				<ul>
  					<li><a href="news.html">最新动态</a></li>
  				</ul>
  			</section>
        <section class="secNav">
  				<ul>
  					<li  class="cur"><a href="news.html">最新动态</a></li>
  				</ul>
  			</section>
  		</section>


<div class="col_lg_12">
    <div class="mainContent">
        <div class="introTit clearfix">
            <h2>运行状态</h2>
        </div>

    </div>
 </div>

 <div class="row">
  <div class="col-md-6">
    <h1>集群总体CPU使用率</h1>
      <div id="CPU" ></div>
  </div>
  <div class="col-md-6">
      <h1>集群总体内存使用率</h1>
      <div id="Memory"></div>
  </div>
</div>

      <hr>
<div class="row">
  <div class="col-md-6">
    <h1>分组CPU使用率</h1>
      <div id="group_cpu" ></div>
  </div>
  <div class="col-md-6">
      <h1>分组内存使用率</h1>
      <div id="group_memory"></div>
  </div>
</div>

      <hr>
<div class="row">
  <div class="col-md-12">
    <h1>存储使用率</h1>
      <div id="storage1" ></div>
  </div>

</div>

            <hr>
<div class="row">
  <div class="col-md-6">
    <h1>存储使用率</h1>
      <select name="main_id" id="main_id" class="text input-large form-control" ></select>
      <div id="storage" ></div>
  </div>
  <div class="col-md-6">
      <h1>运行队列</h1>
      <div id="line22">

      </div>
  </div>
</div>
    <div class="clearfix"></div>
  </div>
</div>

{% endblock %}

{% block script_extends %}


<script src="http://cdn.highcharts.com.cn/highstock/highstock.js"></script>
<script type="text/javascript">
     Highcharts.setOptions({ global: { useUTC: false } });
</script>

<script src="{% static 'ajax/cpu.js'%}"></script>
<script src="{% static 'ajax/memory.js'%}"></script>
<script src="{% static 'ajax/group_cpu.js'%}"></script>
<script src="{% static 'ajax/group_memory.js'%}"></script>
<script src="{% static 'ajax/strorage.js'%}"></script>
<script>






function timeDown(limit) {
   if (limit == 60) {
   get_cpu();
   get_memory();
   get_group_memory();
   get_group_cpu();
   }
   limit--;

   if (limit < 0) {
       limit = 60;
   }

   setTimeout(function() {
       timeDown(limit);
   }, 1000)
}



$(document).ready(function() {
   timeDown(60);


    })
</script>
{% endblock %}